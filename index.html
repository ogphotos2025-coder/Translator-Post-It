<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>University Multilingual Exchange</title>
  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; }
    h1, h2, .serif { font-family: 'Libre Baskerville', serif; }
    .corkboard {
      background-color: #dcb07b;
      background-image: radial-gradient(#c59a67 10%, transparent 10%);
      background-size: 10px 10px;
    }
  </style>
</head>
<body class="bg-[#f4f1ea] text-slate-900">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    const GraduationCap = ({ size = 24 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M22 10v6M2 10l10-5 10 5-10 5z"/><path d="M6 12v5c3 3 9 3 12 0v-5"/></svg>
    );

    const Trash2 = ({ size = 16 }) => (
      <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" x2="10" y1="11" y2="17"/><line x1="14" x2="14" y1="11" y2="17"/></svg>
    );

    function LanguageExchangeBoard() {
      const [english, setEnglish] = useState('');
      const [foreign, setForeign] = useState('');
      const [targetLang, setTargetLang] = useState('es'); 
      const [name, setName] = useState('');
      const [notes, setNotes] = useState([]);
      const [loading, setLoading] = useState(true);
      const [isTranslating, setIsTranslating] = useState(false);

      const languages = {
        es: { name: 'Spanish', flag: 'ðŸ‡ªðŸ‡¸', code: 'es' },
        fr: { name: 'French', flag: 'ðŸ‡«ðŸ‡·', code: 'fr' },
        zh: { name: 'Mandarin', flag: 'ðŸ‡¨ðŸ‡³', code: 'zh' }
      };

      const paperStyles = [
        'bg-white border-l-4 border-blue-800 shadow-md',
        'bg-slate-50 border-l-4 border-red-800 shadow-md',
        'bg-[#fffdf2] border-l-4 border-yellow-600 shadow-md',
      ];

      useEffect(() => {
        const savedData = localStorage.getItem('uni-multilingual-notes');
        if (savedData) setNotes(JSON.parse(savedData));
        setLoading(false);
      }, []);

      useEffect(() => {
        if (!loading) localStorage.setItem('uni-multilingual-notes', JSON.stringify(notes));
      }, [notes, loading]);

      const performTranslation = async (text, direction) => {
        if (!text.trim()) return;
        setIsTranslating(true);
        try {
          // direction 'toForeign' = en|target, 'toEnglish' = target|en
          const langPair = direction === 'toForeign' ? `en|${targetLang}` : `${targetLang}|en`;
          const response = await fetch(`https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=${langPair}`);
          const data = await response.json();
          
          if (data.responseData.translatedText) {
            if (direction === 'toForeign') setForeign(data.responseData.translatedText);
            else setEnglish(data.responseData.translatedText);
          }
        } catch (error) {
          alert("Translation link interrupted. Please verify campus connectivity.");
        } finally {
          setIsTranslating(false);
        }
      };

      const handleSubmit = () => {
        if (!english.trim() || !foreign.trim()) return;
        const newNote = {
          id: Date.now(),
          name: name.trim() || 'Anonymous Scholar',
          english: english.trim(),
          foreign: foreign.trim(),
          langLabel: languages[targetLang].name,
          flag: languages[targetLang].flag,
          style: paperStyles[Math.floor(Math.random() * paperStyles.length)],
          timestamp: new Date().toLocaleString()
        };
        setNotes(prev => [newNote, ...prev]);
        setEnglish(''); setForeign(''); setName('');
      };

      const deleteNote = (id) => setNotes(prev => prev.filter(n => n.id !== id));

      if (loading) return <div className="h-screen flex items-center justify-center serif italic">Accessing Language Lab Records...</div>;

      return (
        <div className="min-h-screen pb-20">
          <nav className="bg-[#1a2a44] text-[#f4f1ea] py-8 px-6 border-b-4 border-[#9c1c2e] shadow-2xl mb-12">
            <div className="max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between gap-4">
              <div className="flex items-center gap-4">
                <GraduationCap size={48} />
                <div>
                  <h1 className="text-3xl font-bold tracking-tight uppercase">Department of Linguistics</h1>
                  <p className="text-sm opacity-80 uppercase tracking-widest">Bidirectional Translation Exchange</p>
                </div>
              </div>
            </div>
          </nav>

          <main className="max-w-6xl mx-auto px-6 grid lg:grid-cols-12 gap-12">
            <div className="lg:col-span-4">
              <div className="bg-white border-2 border-slate-200 p-8 rounded-lg shadow-sm sticky top-8">
                <h2 className="text-xl font-bold border-b-2 border-slate-100 pb-4 mb-6 text-slate-800 uppercase tracking-tighter">Translation Desk</h2>
                
                <div className="space-y-6">
                  <div>
                    <label className="block text-xs font-bold uppercase text-slate-500 mb-2">Active Study Language</label>
                    <div className="grid grid-cols-3 gap-2">
                      {Object.keys(languages).map(key => (
                        <button key={key} onClick={() => setTargetLang(key)}
                          className={`p-2 rounded text-[10px] font-bold border transition-all ${targetLang === key ? 'bg-blue-800 text-white border-blue-900 shadow-md' : 'bg-slate-50 text-slate-600 border-slate-200'}`}>
                          {languages[key].flag} {languages[key].name}
                        </button>
                      ))}
                    </div>
                  </div>

                  <div>
                    <label className="block text-xs font-bold uppercase text-slate-500 mb-1">Student Name</label>
                    <input type="text" placeholder="Full Name" value={name} onChange={(e) => setName(e.target.value)}
                      className="w-full p-2 border-b-2 border-slate-200 focus:border-blue-800 outline-none transition-colors text-sm" />
                  </div>

                  <div className="relative">
                    <label className="block text-xs font-bold uppercase text-slate-500 mb-1">ðŸ‡ºðŸ‡¸ English Phrase</label>
                    <textarea value={english} onChange={(e) => setEnglish(e.target.value)}
                      className="w-full p-3 bg-slate-50 border border-slate-200 rounded h-24 focus:ring-1 focus:ring-blue-800 outline-none text-sm resize-none" />
                    <button onClick={() => performTranslation(english, 'toForeign')} 
                      className="absolute bottom-2 right-2 text-[10px] bg-blue-800 text-white px-2 py-1 rounded hover:bg-blue-900 disabled:opacity-50">
                      {isTranslating ? '...' : `Translate to ${languages[targetLang].name}`}
                    </button>
                  </div>

                  <div className="relative">
                    <label className="block text-xs font-bold uppercase text-slate-500 mb-1">{languages[targetLang].flag} {languages[targetLang].name} Phrase</label>
                    <textarea value={foreign} onChange={(e) => setForeign(e.target.value)}
                      className="w-full p-3 bg-blue-50/30 border border-slate-200 rounded h-24 focus:ring-1 focus:ring-blue-800 outline-none text-sm resize-none" />
                    <button onClick={() => performTranslation(foreign, 'toEnglish')} 
                      className="absolute bottom-2 right-2 text-[10px] bg-[#9c1c2e] text-white px-2 py-1 rounded hover:bg-red-900 disabled:opacity-50">
                      {isTranslating ? '...' : `Translate to English`}
                    </button>
                  </div>

                  <button onClick={handleSubmit} disabled={!english || !foreign}
                    className="w-full py-3 bg-slate-800 text-white font-bold rounded hover:bg-black transition-colors shadow-md uppercase tracking-wider text-xs">
                    Pin to Public Board
                  </button>
                </div>
              </div>
            </div>

            <div className="lg:col-span-8">
              <div className="corkboard p-8 rounded-xl shadow-inner min-h-[600px] border-8 border-[#5d4037]">
                <div className="grid md:grid-cols-2 gap-6">
                  {notes.map(note => (
                    <div key={note.id} className={`${note.style} p-5 relative transform rotate-1 hover:rotate-0 transition-all duration-300`}>
                      <button onClick={() => deleteNote(note.id)} className="absolute top-2 right-2 text-slate-300 hover:text-red-600 transition-colors">
                        <Trash2 />
                      </button>
                      <div className="w-3 h-3 bg-red-600 rounded-full absolute -top-1 left-1/2 -translate-x-1/2 shadow-sm"></div>
                      
                      <div className="mb-4">
                        <p className="text-[9px] font-black text-blue-900 uppercase mb-1">English</p>
                        <p className="text-sm font-medium leading-tight">{note.english}</p>
                      </div>
                      
                      <div>
                        <p className="text-[9px] font-black text-red-900 uppercase mb-1">{note.flag} {note.langLabel}</p>
                        <p className="serif text-lg leading-tight text-slate-800">{note.foreign}</p>
                      </div>
                      
                      <div className="mt-6 pt-2 border-t border-slate-100 flex justify-between items-center opacity-50">
                        <span className="text-[9px] font-bold uppercase tracking-widest">{note.name}</span>
                        <span className="text-[9px]">{note.timestamp}</span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </main>
        </div>
      );
    }

    ReactDOM.render(<LanguageExchangeBoard />, document.getElementById('root'));
  </script>
</body>
</html>
